# 10장 병행성	

### 규칙 66 변경 가능 공유 데이터에 대한 접근은 동기화하라

`Synchronized`키워드는 특정 메서드나 코드 블록을 한 번에 한 스레드만 사용하도록 보장한다. 

> 동기화 없이는 한 스레드가 만든 변화를 다른 스레드가 확인할 수 없다. 동기화는 스레드가 일관성이 깨진 객체를 관측할 수 없도록 할 뿐 아니라, 동기화 메서드나 동기화 블록에 진입한 스레드가 동일한 락의 보호 아래 이루어진 모든 변경의 영향을 관측할 수 있도록 보장한다.

long / double 이 아닌 모든 변수는 `원자적`으로 읽고 쓸 수 있다, 즉 long / double이 아닌 변수를 읽으면 나오는 값은 어떤 스레드가 저장한 값이라는 것.



변경가능한 데이터를 공유할 때는 해당 데이터를 읽거나 쓰는 모든 스레드는 동기화를 수행해야 한다



**?**

- 상호배제성
  -  
- volatile  vs synchronized 
  - ​

### 규칙 67. 과도한 동기화는 피하라

동기화를 과도하게 적용하면 성능저하, 교착상태, 비결정적 동작 등의 문제 발생



### 규칙 70. 스레드 안전성에 대해 문서로 남겨라 



###규칙 72. 스레드 스케줄러에 의존하지 마라

스레드 스케줄러(thread scheduler) : 실행할 스레드가 많을때, 어떤 스레드가 얼마나 오랫동안 실행할지 결정하는 것

> OS에 따라 스케줄링 정책이 바뀔 수 있으므로, 스레드 스케줄러에 의존하는 프로그램은 이식성이 떨어진다.

안정적이고, 즉각 반응하며 이식성 좋은 프로그램을 만드는 방법

- `실행 가능 스레드`의 평균적 수가 `프로세서`수보다 너무 많아 지지 않도록 하는것 (대기중(waiting)인 스레드는 실행 가능한 스레드가 아님)

실행 가능 스레드수를 일정 수준으로 낮추는 방법

- 각 스레드가 필요한 일을 하고 나서 다음에 할 일을 기다리게 만듬
- 스레드가 일을하고 있지 않을 때 실행 중이어서

